# 「飛行驅動 Python」課程大綱 - 詳細版

**版本**：v1.0
**更新日期**：2026-01-30
**適用對象**：高中學生

---

## 課程總覽

### 課程資訊
- **課程名稱**：飛行驅動 Python - 無人機程式設計實作課程
- **總時數**：18 週（每週 2-3 小時，共 36-54 小時）
- **學分數**：建議 2 學分（校訂選修課程）
- **先修課程**：無（適合程式設計初學者）

### 課程目標
本課程旨在透過 Crazyflie 無人機，讓學生在有趣的實作過程中學習 Python 程式設計。課程整合「程式設計」、「硬體組裝」、「飛行操作」、「程式控制」四大面向，培養學生的運算思維與問題解決能力。

---

## 教學方法

### 1. 三階段學習模式

#### 階段一：模擬器階段（W1-W8）
- **目的**：在無硬體風險下學習程式基礎
- **工具**：Webots 模擬器 + Crazyflie 虛擬模型
- **優勢**：
  - 學生可在家中練習
  - 避免實機損壞成本
  - 快速驗證程式邏輯
  - 建立飛行空間感

#### 階段二：實機組裝與手控（W9-W10）
- **目的**：理解硬體結構，建立飛行安全意識
- **內容**：
  - 無人機拆解與組裝
  - 手動遙控器訓練
  - 飛行安全規範學習

#### 階段三：程式實飛（W11-W18）
- **目的**：將程式應用於實體無人機
- **內容**：
  - 基礎飛行控制
  - 感測器數據應用
  - 專題開發與展示

### 2. 教學策略

#### 問題導向學習（PBL）
每週設定一個飛行任務挑戰，學生需透過程式設計解決問題。

**範例**：
- W3：「如何讓無人機懸停 5 秒後降落？」
- W8：「如何用最少的程式碼飛出正方形？」
- W13：「如何避免電量耗盡墜機？」

#### 鷹架式教學（Scaffolding）
- **教師示範**：展示核心概念與範例程式
- **引導練習**：學生在教師協助下完成基礎任務
- **獨立實作**：學生自主完成進階挑戰
- **同儕互助**：小組合作除錯與分享

#### 差異化教學
每週提供「基礎版」與「進階版」任務：
- **基礎版**：掌握本週核心概念
- **進階版**：整合先前知識或創意延伸

---

## 各週詳細教學計畫

### 【第一階段】Python 基礎 + 模擬器入門

---

## W1：Python 環境建置與基礎語法

### 教學目標
1. 完成 Python 開發環境安裝
2. 理解變數、資料型態、輸出等基本概念
3. 撰寫第一個 Python 程式

### 教學內容

#### 1. 環境安裝（40 分鐘）
- 安裝 Python 3.8+（建議使用 Anaconda）
- 安裝 VSCode 與 Python 擴充套件
- 驗證安裝：`python --version`

#### 2. Python 基礎語法（60 分鐘）

**變數與資料型態**
```python
# 整數 (int)
age = 16
student_count = 30

# 浮點數 (float)
height = 1.75
weight = 62.5

# 字串 (str)
name = "小明"
school = "內湖高工"

# 布林值 (bool)
is_student = True
has_license = False
```

**輸出與格式化**
```python
# 基本輸出
print("Hello, World!")
print("我的名字是", name)

# 格式化字串（f-string）
print(f"我是 {name}，今年 {age} 歲")
print(f"身高 {height} 公尺，體重 {weight} 公斤")
```

**基礎運算**
```python
# 算術運算
distance = 100  # 公尺
time = 5        # 秒
speed = distance / time
print(f"速度：{speed} m/s")

# BMI 計算
bmi = weight / (height ** 2)
print(f"BMI：{bmi:.2f}")
```

### 實作任務

#### 基礎任務
撰寫一個自我介紹程式，包含：
- 姓名、年齡、學校
- 興趣愛好（至少 3 個）
- 選修本課程的原因

#### 進階任務
製作一個「飛行距離計算器」：
- 輸入速度（m/s）和時間（秒）
- 計算飛行距離
- 輸出結果（格式化至小數點後 2 位）

### 課後作業
1. 完成環境安裝並截圖
2. 繳交自我介紹程式碼
3. 預習：什麼是「函式庫」？

### 評量重點
- 能正確宣告變數並賦值
- 能使用 print() 輸出資訊
- 理解基本資料型態的差異

---

## W2：Webots 模擬器環境設置

### 教學目標
1. 安裝並啟動 Webots 模擬器
2. 載入 Crazyflie 虛擬模型
3. 理解 import 與物件導向初步概念
4. 執行第一個模擬程式

### 教學內容

#### 1. Webots 安裝（30 分鐘）
- 下載 Webots R2023b（教育版免費）
- 系統需求檢查（顯卡、記憶體）
- 首次啟動設定

#### 2. Crazyflie 模型載入（30 分鐘）
- 開啟範例專案：`File > Open World`
- 載入：`webots/projects/robots/bitcraze/crazyflie/worlds/crazyflie.wbt`
- 介面介紹：
  - 3D 視窗：觀看模擬環境
  - Scene Tree：物件階層
  - Text Editor：程式編輯區

#### 3. 物件導向初步（40 分鐘）

**概念引入**
```python
# 真實世界的「物件」
我的手機 = 手機()
我的手機.打電話("0912345678")
我的手機.發簡訊("你好")

# 無人機也是一個「物件」
我的無人機 = 無人機()
我的無人機.起飛()
我的無人機.降落()
```

**實際程式碼**
```python
# 匯入 Webots 的機器人控制函式庫
from controller import Robot

# 建立機器人物件（Crazyflie）
drone = Robot()

# 取得時間步長（simulation time step）
timestep = int(drone.getBasicTimeStep())

# 啟動馬達
print("✈️ 模擬無人機已啟動！")

# 主迴圈（先不深入解釋）
while drone.step(timestep) != -1:
    pass  # 目前什麼都不做
```

### 實作任務

#### 基礎任務
1. 成功啟動 Webots 並載入 Crazyflie 模型
2. 執行範例程式，觀察無人機狀態
3. 修改 print 訊息為「我的第一台模擬無人機」

#### 進階任務
1. 閱讀 Webots 文檔，找出至少 3 個 Robot 物件的方法（methods）
2. 嘗試取得無人機的名稱：`drone.getName()`
3. 在程式中輸出模擬時間步長

### 課後作業
1. 完成 Webots 安裝並截圖執行畫面
2. 撰寫心得：模擬器與真實無人機的差異
3. 預習：什麼是「方法」（Method）？

### 常見問題與除錯
| 問題 | 原因 | 解決方法 |
|-----|------|---------|
| Webots 無法啟動 | 顯卡驅動過舊 | 更新顯卡驅動 |
| 畫面很卡 | 電腦效能不足 | 降低模擬品質設定 |
| 找不到 controller 模組 | Python 環境問題 | 使用 Webots 內建 Python |

---

## W3：模擬器中的起飛與降落

### 教學目標
1. 在 Webots 中實現起飛與降落
2. 理解程式執行的順序性
3. 學習 time.sleep() 的用途

### 教學內容

#### 1. 程式執行順序（20 分鐘）

**概念引入：早晨起床流程**
```python
# 錯誤的順序
穿衣服()
起床()
刷牙()
# ❌ 這樣很奇怪！

# 正確的順序
起床()
刷牙()
穿衣服()
# ✅ 這才合理
```

**無人機飛行順序**
```python
# 必須先起飛，才能執行其他動作
drone.takeoff()  # 1. 起飛
drone.hover()    # 2. 懸停
drone.land()     # 3. 降落
```

#### 2. 基本飛行控制（50 分鐘）

**完整程式範例**
```python
from controller import Robot
import time

# 初始化
drone = Robot()
timestep = int(drone.getBasicTimeStep())

# 取得馬達控制器
m1_motor = drone.getDevice("m1_motor")
m2_motor = drone.getDevice("m2_motor")
m3_motor = drone.getDevice("m3_motor")
m4_motor = drone.getDevice("m4_motor")

# 設定馬達模式
m1_motor.setPosition(float('inf'))
m2_motor.setPosition(float('inf'))
m3_motor.setPosition(float('inf'))
m4_motor.setPosition(float('inf'))

# 設定初始速度為 0
m1_motor.setVelocity(0)
m2_motor.setVelocity(0)
m3_motor.setVelocity(0)
m4_motor.setVelocity(0)

print("準備起飛...")

# 起飛（增加馬達轉速）
m1_motor.setVelocity(50)
m2_motor.setVelocity(50)
m3_motor.setVelocity(50)
m4_motor.setVelocity(50)

# 等待 3 秒（懸停）
time.sleep(3)

print("準備降落...")

# 降落（降低馬達轉速）
m1_motor.setVelocity(0)
m2_motor.setVelocity(0)
m3_motor.setVelocity(0)
m4_motor.setVelocity(0)

print("✓ 飛行完成")
```

#### 3. time.sleep() 的重要性（30 分鐘）

**問題引導**
```python
# ❌ 沒有 sleep 會怎樣？
drone.takeoff()
drone.land()  # 馬上就降落了！
# 結果：無人機根本還沒起飛就要降落

# ✅ 加入 sleep
drone.takeoff()
time.sleep(3)  # 等待 3 秒，讓無人機完成起飛
drone.land()
# 結果：正常的起飛 → 懸停 → 降落
```

**類比：等紅綠燈**
- 程式像是交通指令
- `sleep()` 就像等待紅綠燈
- 如果不等，就會發生意外！

### 實作任務

#### 基礎任務
撰寫一個程式，讓無人機：
1. 起飛
2. 懸停 5 秒
3. 降落
4. 在每個階段輸出訊息（如「正在起飛...」）

#### 進階任務
設計一個「連續起降」程式：
1. 起飛 → 懸停 2 秒 → 降落
2. 等待 1 秒
3. 再次起飛 → 懸停 2 秒 → 降落
4. 總共執行 3 次

### 飛行任務檢核
- [ ] 無人機能穩定起飛至少 50cm
- [ ] 懸停時間符合程式設定
- [ ] 降落過程平穩，無墜落
- [ ] 程式碼有適當的 print 訊息

### 常見錯誤與除錯

**錯誤 1：無人機不會飛**
```python
# ❌ 忘記啟動馬達
print("起飛")
# 結果：只有文字，無人機沒動作

# ✅ 正確寫法
m1_motor.setVelocity(50)  # 要實際控制馬達
```

**錯誤 2：無人機一直飛**
```python
# ❌ 忘記降落指令
drone.takeoff()
time.sleep(3)
# 結果：無人機一直在天上

# ✅ 正確寫法
drone.takeoff()
time.sleep(3)
drone.land()  # 記得降落！
```

### 課後作業
1. 完成基礎任務並錄製影片
2. 思考題：為什麼 `sleep(3)` 的單位是秒？如何改成毫秒？
3. 預習：什麼是「參數」（Parameter）？

---

## W4-W18 詳細教學計畫

（由於篇幅限制，後續週次採用相同格式編寫，包含：教學目標、教學內容、程式範例、實作任務、評量重點、常見錯誤等。）

---

## 評量設計

### 形成性評量（60%）

#### 1. 每週作業（30%）
**評分標準**
- 程式能正確執行（40%）
- 程式碼整潔度（註解、縮排）（30%）
- 創意與延伸（20%）
- 準時繳交（10%）

**作業格式要求**
```python
"""
作業標題：W3 - 起飛與降落
學號：110001
姓名：王小明
日期：2026-02-10
"""

# 程式碼開始
...
```

#### 2. 飛行檢核（20%）
每 4 週進行一次飛行技能測驗：

**第一次檢核（W4）**
- 手動操作模擬器完成指定路徑

**第二次檢核（W10）**
- 實機手動遙控基礎飛行

**第三次檢核（W14）**
- 實機程式控制指定任務

**評分項目**
- 任務完成度（50%）
- 飛行穩定性（30%）
- 安全意識（20%）

#### 3. 課堂參與（10%）
- 出席率（50%）
- 提問與討論（30%）
- 小組合作表現（20%）

### 總結性評量（40%）

#### 1. 期中測驗（W9，10%）

**筆試部分（50%，30 分鐘）**
- 選擇題：Python 基礎語法（20 題）
- 問答題：程式碼閱讀與錯誤找查（2 題）
- 填空題：完成程式碼片段（5 題）

**實作部分（50%，30 分鐘）**
- 在 Webots 中完成指定飛行任務
- 要求：使用 for 迴圈、變數、sleep

#### 2. 期末專題（W18，30%）

**專題評分標準**
| 項目 | 配分 | 說明 |
|-----|------|------|
| 程式碼品質 | 30% | 邏輯清晰、註解完整、變數命名規範 |
| 飛行達成度 | 30% | 任務完成度、飛行穩定性 |
| 安全機制 | 20% | 異常處理、緊急降落、電量檢查 |
| 創意與應用 | 10% | 題目創意、實用性、技術難度 |
| 口頭報告 | 10% | 表達清晰、邏輯完整、時間控制 |

**專題報告格式**
1. 封面（專題名稱、組員、日期）
2. 摘要（100 字以內）
3. 動機與目標
4. 系統架構與程式設計
5. 實作成果（含影片連結）
6. 困難與解決方法
7. 心得與未來改進

---

## 安全規範

### 飛行安全守則

#### 1. 飛行前檢查（Pre-flight Check）
- [ ] 電池電量 > 50%
- [ ] 螺旋槳安裝正確（順槳/逆槳）
- [ ] 保護罩已安裝
- [ ] 周圍 2m 內無人員
- [ ] 飛行空間淨高 > 2m
- [ ] 程式碼已測試（先在模擬器跑過）

#### 2. 飛行中注意事項
- ⚠️ 隨時準備按下緊急降落鍵
- ⚠️ 電量 < 20% 立即降落
- ⚠️ 無人機行為異常立即切斷電源
- ⚠️ 不可將無人機飛出視線範圍

#### 3. 程式碼安全設計
```python
# ✅ 良好的安全設計
try:
    drone.takeoff()
    # 執行飛行任務
    perform_mission()
except Exception as e:
    print(f"❌ 發生錯誤：{e}")
finally:
    # 無論如何都要降落
    drone.land()
    print("✓ 安全降落")
```

#### 4. 緊急處理程序
| 情況 | 處理方法 |
|-----|---------|
| 無人機失控 | 立即切斷電源，不要試圖接住 |
| 電量耗盡 | 啟動緊急降落模式 |
| 撞到障礙物 | 停止馬達，檢查損壞 |
| 程式無回應 | 中斷程式（Ctrl+C），手動降落 |

---

## 教學資源

### 線上資源
1. **官方文檔**
   - Crazyflie 官網：https://www.bitcraze.io/
   - cflib 文檔：https://www.bitcraze.io/documentation/repository/crazyflie-lib-python/
   - Webots 文檔：https://cyberbotics.com/doc/guide/

2. **影片教學**
   - （待建立）課程教學影片頻道
   - YouTube：搜尋「Crazyflie Python tutorial」

3. **社群資源**
   - Bitcraze 論壇：https://forum.bitcraze.io/
   - GitHub 專案範例

### 推薦書籍
1. 《Python 程式設計入門》（碁峰出版）
2. 《無人機基礎與應用》（全華出版）
3. 《運算思維與程式設計》（教育部 108 課綱參考）

---

## 附錄

### 附錄 A：Python 語法快速參考

#### 變數與資料型態
```python
x = 10          # 整數
y = 3.14        # 浮點數
name = "Python" # 字串
flag = True     # 布林值
```

#### 條件判斷
```python
if battery > 50:
    print("電量充足")
elif battery > 20:
    print("電量偏低")
else:
    print("請充電")
```

#### 迴圈
```python
# for 迴圈
for i in range(5):
    print(i)

# while 迴圈
count = 0
while count < 5:
    print(count)
    count += 1
```

#### 函數
```python
def greet(name):
    return f"Hello, {name}!"

message = greet("Python")
print(message)
```

### 附錄 B：Crazyflie 常用指令

#### 基本飛行
```python
# 起飛
cf.commander.send_hover_setpoint(0, 0, 0, 0.5)

# 前進
cf.commander.send_hover_setpoint(0.3, 0, 0, 0.5)

# 降落
cf.commander.send_stop_setpoint()
```

#### 感測器讀取
```python
# 讀取電量
log_config = LogConfig(name='Battery', period_in_ms=1000)
log_config.add_variable('pm.vbat', 'float')

# 讀取高度
log_config.add_variable('stateEstimate.z', 'float')
```

---

**課程大綱版本**：v1.0
**最後更新**：2026-01-30
**編撰者**：Python Flight Academy 團隊
