# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 專案概述

這是一個為期 18 週的高中 Python 程式設計課程專案，使用 **Crazyflie 無人機**搭配 **cflib Python SDK** 進行教學。課程目標是讓台灣高中生（15-18 歲）在符合 108 課綱的架構下，同時學習：

- Python 程式設計基礎
- 無人機硬體組裝
- 無人機手動駕駛
- 無人機程式控制飛行

## 課程架構（五階段 18 週）

### 第一階段：啟航與基礎語法（W1-W4）
- 硬體安全、物件導向初步、順序性邏輯
- 關鍵概念：import、物件建立、方法呼叫、time.sleep()

### 第二階段：移動參數與變數（W5-W8）
- 物理量控制、算術運算、代碼重構
- 關鍵概念：參數傳遞、變數賦值、整數/浮點數、幾何飛行路徑

### 第三階段：邏輯、迴圈與條件判斷（W9-W12）
- 賦予無人機初步決策能力
- 關鍵概念：for/while 迴圈、if-else、input()、布林值

### 第四階段：感測器與資料處理（W13-W15）
- 讀取環境數據，實現自主反應
- 關鍵概念：感測器返回值、資料型態轉換、自定義函數

### 第五階段：進階應用與期末專題（W16-W18）
- 綜合運用，完成特定任務
- 關鍵概念：列表、航點飛行、錯誤追蹤、專題發表

## 教學設計原則

### 1. 安全第一
- 所有飛行任務必須包含「空間安全確認」與「緊急降落指令」提示
- 程式碼中必須確保有 `land()` 的例外處理
- 提醒學生在室內飛行時必須配戴保護罩
- **禁止**生成任何繞過禁航區限制或危險飛行的代碼

### 2. 語法與飛行的關聯
- 每週的 Python 語法必須直接對應到具體的飛行行為
- 例如：for 迴圈 = 巡邏任務、if-else = 電量檢查降落

### 3. 高中難度適配
- 避免使用過於深奧的底層封裝庫
- 專注於 cflib Python 高層 API
- 代碼註解必須清晰，符合高中生理解水平

### 4. Debug 導向
- 每週設計一個「學生常見錯誤 (Pitfall)」與對應的除錯教學
- 引導學生思考代碼背後的物理邏輯（例如：為什麼需要 sleep？）

## 單週教案標準格式

生成單週詳細教案時，必須包含：

1. **教學目標**：1 個語法重點 + 1 個飛行技能
2. **程式範例**：標註清晰的 `template.py`
3. **挑戰任務 (Mission)**：基礎版 + 進階版 (Level Up)
4. **關鍵問題**：引導學生思考的問題
5. **常見錯誤**：學生容易犯的錯誤與解決方法

## 專案目錄結構

```
Python-Flight-Academy/
├── skills/
│   └── course-planner.md          # 課程規畫師 Skill 定義
├── 待改進的課程規畫表.txt           # 18 週課程大綱
└── CLAUDE.md                       # 本文件
```

## 自訂指令說明

在 `skills/course-planner.md` 中定義的 Skill 指令：

- `/analyze-plan` - 分析 18 週大綱，檢查語法進度是否合理
- `/generate-lesson [WEEK_NUMBER]` - 生成特定週次的完整教案
- `/debug-coach [CODE_SNIPPET]` - 以助教語氣引導式分析學生代碼
- `/final-rubric` - 生成第 18 週專題發表評分量表

## 開發時的注意事項

### 程式碼範例撰寫
- 使用 cflib 的高階 API（如 `MotionCommander`, `PositionHlCommander`）
- 每個範例都要有明確的 `try-except-finally` 結構確保安全降落
- 變數命名使用英文，但註解使用繁體中文
- 適度使用 `time.sleep()` 確保指令執行完整

### 教材生成
- 遵循 108 課綱的資訊科技素養指標
- 每週難度呈階梯式遞增
- 避免一次引入多個新概念
- 實作任務要有明確的成功標準

### 感測器相關
- ToF 感測器用於高度測量（W13）
- IMU 姿態儀用於傾角觀察（W14）
- 所有感測器數據讀取都要處理可能的 None 值

### 期末專題設計
- 鼓勵學生自訂題目（如：障礙接力、精準投彈模擬）
- 評分包含：代碼整潔度、飛行達成度、口頭表達、創意性
- 必須包含錯誤處理與安全機制的展示
