# W8：幾何飛行挑戰 - 正方形路徑

## 教學目標
1. 整合前七週所學，完成複雜飛行任務
2. 體驗重複程式碼的冗贅感
3. 學習程式碼註解的重要性
4. 理解程式碼重構的基本概念
5. 為下週的迴圈學習做準備

## 學習重點
- **幾何路徑規劃**：正方形、三角形、多邊形
- **程式碼重複問題**：發現重複模式
- **註解的藝術**：清晰的註解 vs 冗餘的註解
- **重構思維**：如何改善重複的程式碼

---

## 150 分鐘課程設計

### 【第一節】正方形路徑挑戰（50 分鐘）

#### 1. 課程引入（10 分鐘）

**問題引導**：
- 「回顧上週的 L 形路徑，如果要飛一個正方形，需要幾個直線？幾次轉彎？」
- 「正方形的四條邊是什麼關係？」
- 「每次轉彎的角度是多少？」

**幾何分析**：
```
起點 →→→ A
     ↓   ↑
     D ←← B
```

**步驟拆解**：
1. 前進 1m（第一邊）
2. 右轉 90°
3. 前進 1m（第二邊）
4. 右轉 90°
5. 前進 1m（第三邊）
6. 右轉 90°
7. 前進 1m（第四邊）
8. 右轉 90°（回到原始方向）

#### 2. 示範程式 01（15 分鐘）
**檔案**：`examples/W8/01_square_repetitive.py`

**程式碼展示**：
```python
# 第一邊
move_forward(1.0)
rotate_right(90)

# 第二邊
move_forward(1.0)
rotate_right(90)

# 第三邊
move_forward(1.0)
rotate_right(90)

# 第四邊
move_forward(1.0)
rotate_right(90)
```

**關鍵提問**（在展示程式後）：
1. 「這段程式碼有什麼特點？」
2. 「如果要畫一個八邊形，程式碼會有多長？」
3. 「有沒有人覺得這樣寫很累？」

**引導學生發現問題**：
- 程式碼高度重複
- 修改困難（如果要改變邊長，要改 4 個地方）
- 容易出錯（可能漏改某一行）
- 不夠「聰明」

**預告下週**：
- 「下週我們會學習一個神奇的工具，可以讓這 16 行程式碼變成 2 行！」

#### 3. 學生實作（20 分鐘）

**基礎任務**：
- 完成標準正方形路徑（邊長 1m）

**進階任務**：
- 修改程式，讓正方形變成「邊長 1.5m」
- 觀察需要修改幾個地方

**觀察記錄**：
- 請學生記錄：「寫這個程式時，我重複做了哪些事情？」
- 討論：「如果可以自動重複，需要什麼功能？」

#### 4. 小組討論（5 分鐘）
- 「還有哪些幾何圖形也有重複的特性？」
- 「圓形可以用程式畫出來嗎？」（引導思考多邊形逼近圓形）

---

### 【第二節】註解的藝術與程式可讀性（50 分鐘）

#### 1. 為什麼需要註解？（10 分鐘）

**情境劇**：
- 教師展示一段「一個月前自己寫的程式」
- 假裝看不懂：「這是誰寫的？我怎麼看不懂？」
- 引出：「未來的自己也是程式的使用者」

**註解的作用**：
1. 幫助自己記憶
2. 幫助他人理解
3. 標記待辦事項
4. 解釋複雜邏輯

#### 2. 好註解 vs 壞註解（15 分鐘）

**壞註解範例**：
```python
# 加 1
counter += 1

# 設定速度為 55
motor.setVelocity(55)

# 印出訊息
print("起飛")
```
**問題**：只是重複描述程式碼，沒有增加資訊

**好註解範例**：
```python
# 累計完成的飛行任務數
mission_count += 1

# 最佳起飛速度（經實驗得出）
motor.setVelocity(55)

# 起飛階段 1/3：啟動馬達
print("起飛")
```
**優點**：解釋「為什麼」而不是「是什麼」

**註解原則**：
1. 解釋意圖，不是描述動作
2. 標記複雜或不直觀的邏輯
3. 使用分段註解組織程式結構
4. 避免過度註解

#### 3. 示範程式 02（10 分鐘）
**檔案**：`examples/W8/02_well_commented_square.py`

**展示重構後的正方形程式**：
```python
"""
幾何飛行挑戰：正方形路徑
完成一個邊長 1m 的正方形飛行路徑
"""

# ========== 飛行參數設定 ==========
SIDE_LENGTH = 1.0    # 正方形邊長（公尺）
TURN_ANGLE = 90      # 每次轉彎角度（度）
NUM_SIDES = 4        # 正方形邊數

# ========== 起飛階段 ==========
takeoff(height=1.0)

# ========== 正方形飛行 ==========
# 第一邊：向前（原始方向）
move_forward(SIDE_LENGTH)
rotate_right(TURN_ANGLE)

# 第二邊：向右（相對原始方向）
move_forward(SIDE_LENGTH)
rotate_right(TURN_ANGLE)

# 第三邊：向後（相對原始方向）
move_forward(SIDE_LENGTH)
rotate_right(TURN_ANGLE)

# 第四邊：向左（相對原始方向）
move_forward(SIDE_LENGTH)
rotate_right(TURN_ANGLE)

# ========== 降落階段 ==========
land()
```

**教學要點**：
- 使用常數（大寫變數名稱）定義參數
- 分段註解標記程式結構
- 每一邊標記相對方向，幫助理解

#### 4. 學生練習（15 分鐘）

**任務**：為上一節寫的程式添加註解
- 使用分段註解（`# =====`）
- 解釋每個參數的意義
- 標記每條邊的方向

**同儕審閱**：
- 交換程式碼，看能否理解對方的註解
- 給出改進建議

---

### 【第三節】多邊形飛行挑戰（50 分鐘）

#### 1. 多邊形內角公式（10 分鐘）

**數學連結**：
```
正多邊形外角 = 360° / 邊數

三角形：360° / 3 = 120°
正方形：360° / 4 = 90°
五邊形：360° / 5 = 72°
六邊形：360° / 6 = 60°
```

**探究問題**：
- 「為什麼是 360° 而不是內角和？」
- 「如果轉 N 次外角，總共轉了多少度？」

**幾何直覺**：
- 走完一圈後，朝向回到原點
- 總旋轉角度 = 360°

#### 2. 示範程式 03-04（15 分鐘）

**檔案 03**：`examples/W8/03_triangle.py`
- 等邊三角形（轉角 120°）
- 只需 3 組重複

**檔案 04**：`examples/W8/04_pentagon.py`
- 正五邊形（轉角 72°）
- 需要 5 組重複
- 體驗「越多邊越痛苦」

**對比展示**：
```python
# 三角形：12 行程式碼
# 五邊形：20 行程式碼
# 十邊形：40 行程式碼 ← 想像一下！
```

**再次引導**：
- 「有沒有更聰明的寫法？」
- 「電腦不就是用來做重複工作的嗎？」

#### 3. 學生挑戰（20 分鐘）

**任務選擇**：

**選項 A：三角形**（難度 ⭐⭐）
- 完成等邊三角形路徑
- 邊長 1.2m

**選項 B：五邊形**（難度 ⭐⭐⭐）
- 完成正五邊形路徑
- 邊長 0.8m

**選項 C：星形**（難度 ⭐⭐⭐⭐⭐）
- 挑戰五角星形路徑
- 提示：轉角 144°

**創意加分**：
- 設計自己的幾何圖案（如「8」字形、葫蘆形）

#### 4. 成果發表（5 分鐘）

**展示重點**：
- 2-3 組展示成功的路徑
- 討論最困難的部分
- 統計：總共寫了多少行重複的程式碼？

---

### 【第四節】程式碼重構思維（額外補充，可選）

如果時間允許，可以引導學生思考：

#### 1. 發現模式
```python
# 模式：move_forward() + rotate_right() 重複 N 次
# 變化：N（邊數）、角度
```

#### 2. 參數化思維
```python
# 如果可以定義一個函數：
def draw_polygon(sides, length):
    angle = 360 / sides
    # ... 某種方式重複 sides 次
```

#### 3. 預告下週（For 迴圈）
```python
# 神秘的 for 迴圈可以做到：
for i in range(4):
    move_forward(1.0)
    rotate_right(90)
# 只要 3 行就完成正方形！
```

---

## 範例程式說明

### 01_square_repetitive.py
- **目的**：體驗重複程式碼的冗贅感
- **難度**：⭐⭐
- **重點**：故意寫重複代碼，引發思考

### 02_well_commented_square.py
- **目的**：學習良好的註解風格
- **難度**：⭐⭐
- **重點**：分段註解、常數定義

### 03_triangle.py
- **目的**：三角形路徑飛行
- **難度**：⭐⭐⭐
- **重點**：120° 轉角計算

### 04_pentagon.py
- **目的**：五邊形路徑飛行
- **難度**：⭐⭐⭐⭐
- **重點**：更多重複，加深痛點

### 05_star_challenge.py
- **目的**：五角星形高級挑戰
- **難度**：⭐⭐⭐⭐⭐
- **重點**：144° 轉角、路徑交叉

---

## 作業

### 基礎作業（必做）
1. 完成正方形飛行路徑，並添加完整註解
2. 回答問題：
   - 寫正方形程式時，你重複了哪些程式碼？
   - 如果要寫十邊形，你願意嗎？為什麼？
3. 思考：你能想到什麼方法可以簡化重複的程式碼？

### 進階作業（選做）
1. 完成等邊三角形或正五邊形
2. 計算：如果要用程式畫一個圓形（用 36 邊形逼近），需要寫多少行程式碼？

### 創意挑戰（加分）
- 設計一個組合圖形（例如：正方形內部再畫一個小三角形）
- 挑戰五角星形路徑

---

## 教學提醒

### 常見問題

1. **轉彎角度計算錯誤**
   - 原因：混淆內角與外角
   - 解決：使用公式「外角 = 360° / 邊數」

2. **路徑無法閉合**
   - 原因：邊數與轉角不匹配
   - 解決：檢查是否完成所有邊

3. **程式碼修改困難**
   - 原因：使用魔術數字（magic numbers）
   - 解決：使用常數定義參數

### 重要教學目標

**本週最重要的不是「會寫」，而是「感受痛點」**：
- 讓學生體驗重複程式碼的痛苦
- 自然引發「需要更好方法」的需求
- 為下週迴圈學習建立強烈動機

**教學策略**：
- 故意讓學生寫重複的程式碼
- 不要太早提示「迴圈」的存在
- 透過五邊形、十邊形的「恐嚇」，加深痛點
- 在課程結尾時「預告」下週的解決方案

### 引導話術範例

**課程開始**：
- 「今天我們要挑戰用程式畫出幾何圖形！」

**中段（學生開始感到重複）**：
- 「是不是覺得有點累？好消息是，電腦就是用來做這種重複工作的！」

**結尾（預告下週）**：
- 「你們寫了 20 行的五邊形程式，下週我會教你們用 2 行完成！」

---

## 下週預告

**W9：For 迴圈與 Crazyflie 組裝**
- 學習 for 迴圈，讓程式碼從 20 行變成 2 行
- 開始組裝實體 Crazyflie 無人機
- 模擬器階段完成，準備進入實機操作
